---
id: events
title: Console Events
sidebar_label: Console Events
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

Events allow users to be notified when certain operations are performed in the Console.

## Event types

All the events triggered by the Console share some common properties:

| Property         | Value    | Description                                                    |
|------------------|----------|----------------------------------------------------------------|
| `eventName`      | `string` | The name of the event, usually in the form of `subject_action` |
| `eventTimestamp` | `number` | The timestamp of the event emission                            |
| `payload`        | `object` | Contains the event-specific payload                            |

### Project Created

This event will be triggered when a project is created successfully.

#### Event `payload`

| Property    | Value    | Description                                                |
|-------------|----------|------------------------------------------------------------|
| `tenantId`  | `string` | The identifier of the Company the Project belongs to       |
| `projectId` | `string` | The identifier of the newly created Project                |
| `project `  | `object` | The project metadata (ideally, the whole project resource) |

<Tabs>
<TabItem value="example" label="Example" default>

```json
{
  "eventName": "project_created",
  "eventTimestamp": 123456,
  "payload": {
    "tenantId": "my-company-id",
    "projectId": "0000000000000001"
  }
}
```

</TabItem>
<TabItem value="json-schema" label="JSON Schema">

```json
{
  "additionalProperties": false,
  "properties": {
    "eventName": {
      "const": "project_created",
      "type": "string"
    },
    "eventTimestamp": {
      "type": "number"
    },
    "payload": {
      "additionalProperties": false,
      "properties": {
        "projectId": {
          "type": "string",
          "description": "The identifier of the Project that was created"
        },
        "tenantId": {
          "type": "string",
          "description": "The identifier of the Company the Project belongs to"
        },
        "project": {
          "type": "object",
          "description": "The project metadata (ideally, the whole project resource)"
        }
      },
      "required": ["tenantId", "projectId"],
      "type": "object"
    }
  },
  "required": ["eventName", "eventTimestamp", "payload"],
  "type": "object"
}
```

</TabItem>
<TabItem value="project-json-schema" label="project JSON Schema">

```json
{
  "type": "object",
  "properties": {
    "_id": { "type": "string" },
    "areNamespacesCreated": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "namespace": { "type": "string" },
          "envId": { "type": "string" },
          "error": {
            "type": "object",
            "properties": {
              "message": { "type": "string" },
              "errorCode": { "type": "string" },
              "statusCode": { "type": "string" },
            },
          },
          "message": { "type": "string" },
          "labels": {
            "type": "object",
            "additionalProperties": true,
          },
          "deployServiceAccount": {
            "type": "object",
            "properties": {
              "name": { "type": "string" },
              "base64CA": { "type": "string" },
            },
          },
        },
      },
    },
    "availableNamespaces": {
      "type": "array",
      "default": [],
      "items": {
        "type": "object",
        "properties": {
          "value": { "type": "string" },
          "label": { "type": "string" },
        },
        "required": ["value"],
      },
    },
    "configurationGitPath": { "type": "string" },
    "defaultBranch": { "type": "string" },
    "description": { "type": "string" },
    "enabledServices": {
      "type": "object",
      "additionalProperties": true,
    },
    "environments": {
      "type": "array",
      "default": [],
      "items": {
        "type": "object",
        "properties": {
          "label": { "type": "string" },
          "envId": { "type": "string" },
          "envPrefix": { "type": "string" },
          "hosts": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "host": { "type": "string" },
                "isBackoffice": { "type": "boolean" },
                "scheme": { "type": "string", "description": "an url schema, usually one of 'http' or 'https'" },
              },
            },
          },
          "description": { "type": "string" },
          "isProduction": { "type": "boolean", "default": false },
          "cluster": {
            "type": "object",
            "properties": {
              "namespace": { "type": "string" },
              "clusterId": { "type": "string" }
            },
          },
          "deploy": {
            "type": "object",
            "required": ["type"],
            "properties": {
              "type": { "type": "string" }
            },
          },
        },
        "required": ["envId"],
      },
    },
    "hostnames": {
      "type": "object",
      "additionalProperties": { "type": "string" },
    },
    "isRepositoryCreated": { "type": "boolean" },
    "name": { "type": "string" },
    "projectId": { "type": "string" },
    "projectNamespaceVariable": { "type": "string" },
    "repository": {
      "type": "object",
      "properties": {
        "providerId": { "type": "string" },
      },
    },
    "repositoryUrl": { "type": "string" },
    "tenantId": { "type": "string" },
    "tenantName": { "type": "string" },
  },
  "required": ["_id", "name", "configurationGitPath", "projectId", "environments", "repository"],
  "additionalProperties": false
}
```

</TabItem>
</Tabs>

### Service Created

This event will be triggered when a microservice is successfully generated from a marketplace template or example.

:::note
The event is triggered as soon as the service's repository is successfully created,
hence there is no guarantee that the service will be found in the project configuration, yet.
:::

#### Event `payload`

| Property        | Value    | Description                                                                                  |
|-----------------|----------|----------------------------------------------------------------------------------------------|
| `tenantId`      | `string` | The identifier of the Company the service belongs to                                         |
| `projectId`     | `string` | The identifier of the Project the service belongs to                                         |
| `repositoryURL` | `string` | The URL of the repository that hosts the service code                                        |
| `serviceName`   | `string` | The name of the service inside the project configuration                                     |
| `templateId`    | `string` | The identifier of the template in the Console marketplace from which the service was created |
| `service`       | `object` | The service metadata (ideally, the whole service resource)                                   |

<Tabs>
<TabItem value="example" label="Example" default>

```json
{
  "eventName": "service_created",
  "eventTimestamp": 123456,
  "payload": {
    "tenantId": "my-company-id",
    "projectId": "0000000000000001",
    "repositoryURL": "http://gihub.com/my-repository",
    "serviceName": "my-service",
    "templateId": "0000000000000002"
  }
}
```

</TabItem>
<TabItem value="json-schema" label="JSON Schema">

```json
{
  "additionalProperties": false,
  "properties": {
    "eventName": {
      "const": "service_created",
      "type": "string"
    },
    "eventTimestamp": {
      "type": "number"
    },
    "payload": {
      "additionalProperties": false,
      "properties": {
        "tenantId": {
          "type": "string",
          "description": "The identifier of the Company the service belongs to"
        },
        "projectId": {
          "type": "string",
          "description": "The identifier of the Project the service belongs to"
        },
        "repositoryURL": {
          "type": "string",
          "description": "The URL of the repository that hosts the service code"
        },
        "serviceName": {
          "type": "string",
          "description": "The name of the service inside the project configuration"
        },
        "templateId": {
          "type": "string",
          "description": "The identifier of the template in the Console marketplace from which the service was created"
        },
        "service": {
          "type": "object",
          "description": "The service metadata (ideally, the whole service resource)"
        }
      },
      "required": ["projectId", "serviceName", "repositoryURL", "templateId"],
      "type": "object"
    }
  },
  "required": ["eventName", "eventTimestamp", "payload"],
  "type": "object"
}
```

</TabItem>
<TabItem value="service-json-schema" label="service JSON Schema">

```json
{
  "type": "object",
  "properties": {
    "serviceName": { "type": "string" },
    "dockerImage": { "type": "string" },
    "repoId": { "oneOf": [{ "type": "integer" }, { "type": "string" }] },
    "webUrl": { "type": "string" },
    "sshUrl": { "type": "string" },
    "resourceName": { "type": "string" },
    "defaultEnvironmentVariables": {
      "type": "array",
      "items": {
        "type": "object",
        "if": {
          "type": "object",
          "properties": {
            "valueType": { "type": "string", "const": "plain" },
          },
        },
        "then": {
          "type": "object",
          "properties": {
            "name": { "type": "string", "minLength": 1 },
            "value": { "type": "string" },
            "valueType": { "type": "string", "const": "plain" },
            "readOnly": { "type": "boolean" },
            "managedBy": { "type": "string" },
            "description": { "type": "string" },
          },
          "additionalProperties": false,
          "required": ["name", "value", "valueType"],
        },
        "else": {
          "if": {
            "type": "object",
            "properties": {
              "valueType": {
                "type": "string",
                "const": "secret"
              },
            },
          },
          "then": {
            "type": "object",
            "properties": {
              "name": { "type": "string", "minLength": 1 },
              "readOnly": { "type": "boolean" },
              "managedBy": { "type": "string" },
              "secretName": {
                "type": "string",
                "pattern": "^[a-z][a-z0-9]*(-[a-z0-9]+)*$",
                "x-validation-error-id": "resourceName.patternError",
              },
              "secretKey": {
                "type": "string",
                "pattern": "^[a-zA-Z0-9-_.]*$",
                "x-validation-error-id": "serviceSecretKey.patternError",
              },
              "valueType": { "type": "string", "const": "secret" },
              "description": { "type": "string" },
            },
            "additionalProperties": false,
            "required": ["name", "secretName", "secretKey", "valueType"],
          },
          "else": false,
        },
      },
    },
    "defaultResources": {
      "type": "object",
      "properties": {
        "cpuLimits": {
          "type": "object",
          "properties": {
            "max": {
              "type": "string",
              "pattern": "(^((\\{\\{([A-Z])([A-Z0-9_]*)\\}\\})|(\\d+))m$)|^$",
            },
            "min": {
              "type": "string",
              "pattern": "(^((\\{\\{([A-Z])([A-Z0-9_]*)\\}\\})|(\\d+))m$)|^$",
            },
          },
        },
        "memoryLimits": {
          "type": "object",
          "properties": {
            "max": {
              "type": "string",
              "pattern": "(^((\\{\\{([A-Z])([A-Z0-9_]*)\\}\\})|(\\d+))Mi$)|^$",
            },
            "min": {
              "type": "string",
              "pattern": "(^((\\{\\{([A-Z])([A-Z0-9_]*)\\}\\})|(\\d+))Mi$)|^$",
            },
          },
        },
      },
    },
    "defaultProbes": {
      "type": "object",
      "properties": {
        "liveness": {
          "type": "object",
          "properties": {
            "path": {
              "type": "string",
              "pattern": "^\\/(([\\w\\-:.\\{\\}])\\/?)*$|^$",
              "x-validation-error-id": "probesPath.patternError",
            },
            "port": {
              "type": "integer",
              "minimum": 0,
              "maximum": 65535,
            },
            "cmd": { "type": "array", "items": { "type": "string" } },
            "initialDelaySeconds": { "type": "number" },
            "periodSeconds": { "type": "number" },
            "timeoutSeconds": { "type": "number" },
            "successThreshold": { "type": "number" },
            "failureThreshold": { "type": "number" },
          },
        },
        "readiness": {
          "type": "object",
          "properties": {
            "path": {
              "type": "string",
              "pattern": "^\\/(([\\w\\-:.\\{\\}])\\/?)*$|^$",
              "x-validation-error-id": "probesPath.patternError",
            },
            "port": {
              "type": "integer",
              "minimum": 0,
              "maximum": 65535,
            },
            "cmd": { "type": "array", "items": { "type": "string" } },
            "initialDelaySeconds": { "type": "number" },
            "periodSeconds": { "type": "number" },
            "timeoutSeconds": { "type": "number" },
            "successThreshold": { "type": "number" },
            "failureThreshold": { "type": "number" },
          },
        },
      },
    },
    "defaultTerminationGracePeriodSeconds": { "type": "number" },
    "defaultLogParser": { "type": "string" },
    "defaultArgs": {
      "type": "array",
      "items": { "type": "string" },
    },
    "containerPorts": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "pattern": "^[a-z][-a-z0-9]*([a-z0-9])?$",
            "x-validation-error-id": "resourceName.patternError",
          },
          "from": {
            "if": { "type": "number" },
            "then": {
              "type": "integer",
              "minimum": 0,
              "maximum": 65535,
            },
            "else": {
              "type": "string",
              "pattern": "^$|^((\\{\\{([A-Z])([A-Z0-9_]*)\\}\\})|([1-9]\\d*|0))$",
            },
          },
          "to": {
            "if": { "type": "number" },
            "then": {
              "type": "integer",
              "minimum": 0,
              "maximum": 65535,
            },
            "else": {
              "type": "string",
              "pattern": "^$|^((\\{\\{([A-Z])([A-Z0-9_]*)\\}\\})|([1-9]\\d*|0))$",
            },
          },
          "protocol": { "type": "string" },
        },
        "required": ["name", "from"],
      },
    },
    "defaultMonitoring": {
      "type": "object",
      "properties": {
        "endpoints": {
          "type": "array",
          "nullable": true,
          "items": {
            "type": "object",
            "properties": {
              "path": { "type": "string" },
              "port": { "type": "string" },
              "interval": { "type": "string" },
            },
          },
        },
      },
    },
    "defaultDocumentationPath": {
      "type": "string",
      "pattern": "^$|^(\\/$|(\\/([\\w\\-\\.]|(:[a-zA-Z]))[\\w\\-\\.]*)+)$",
      "x-validation-error-id": "swaggerPath.patternError",
    },
    "defaultConfigMaps": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "pattern": "^[a-z][a-z0-9]*(-[a-z0-9]+)*$",
            "x-validation-error-id": "resourceName.patternError",
          },
          "mountPath": {
            "type": "string",
            "pattern": "^[a-zA-Z0-9-/_\\s.|\\\\!\"£$%&()=?^\"{}[\\]*+@]+$",
            "x-validation-error-id": "configMountPath.patternError",
          },
          "subPaths": {
            "type": "array",
            "items": { "type": "string" },
          },
          "viewAsReadOnly": { "type": "boolean" },
          "link": {
            "type": "object",
            "properties": {
              "targetSection": { "type": "string" },
            },
          },
          "files": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "name": { "type": "string" },
                "content": { "type": "string" },
              },
            },
          },
        },
        "additionalProperties": true,
      },
    },
    "defaultSecrets": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "pattern": "^[a-z][a-z0-9]*(-[a-z0-9]+)*$",
            "x-validation-error-id": "resourceName.patternError",
          },
          "mountPath": {
            "type": "string",
            "pattern": "^[a-zA-Z0-9-/_\\s.|\\\\!\"£$%&()=?^\"{}[\\]*+@]+$",
            "x-validation-error-id": "configMountPath.patternError",
          },
        },
        "additionalProperties": false,
      },
    },
  },
  "additionalProperties": false
}
```

</TabItem>
</Tabs>

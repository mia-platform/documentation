---
id: service-template-integrated-with-jenkins
title: Create a service template integrated with Jenkins
sidebar_label: Create a service template integrated with Jenkins
---

:::warning
At the moment, the only git provider supported is GitLab.
:::

After having created a template following our [guide](/marketplace/add_to_marketplace/add_item_by_type/add_template_or_example.md), you can include an xml file inside the template repo, describing how
Jenkins should configure the build job.
If you want to rely upon **Jenkins** as your CI/CD system, you need to do the following:

- include the XML template of the Jenkins job that will build your service somewhere in the repo template (e.g. at `path/to/xml/build/build-job.xml`). [Here](/docs_files_to_download/build-job.xml) you
can find an example of this file.
- in the `marketplace` collection on MongoDB, the object correpsonding to your template must contain a `pipelines.jenkins` field structured as in the example below:

```json
{
    "_id" : ,
    "name" : "template_name",
    "archiveUrl" : "https://<GITLAB_URL>/api/v4/projects/<PROJECT_ID>/repository/archive.tar.gz",
    "type" : "template",
    ...
    "pipelines" : {
        "jenkins" : {
            "xmlTemplate" : {
                "gitProjectId" : "<PROJECT_ID>",
                "gitPath" : "path/to/xml/build/file",
                "gitBranch" : "master"
            },
            "gitWebhookOptions" : {
                "pushEvents" : true,
                "tagPushEvents" : true
            }
        }
    },
}
```

:::note
`gitWebhookOptions` replaces the deprecated `gitlabWebhookOptions`, which at the moment is still supported but will be removed in the future.

`gitProjectId`, `gitPath` and `gitBranch` replaces the deprecated `gitlabProjectId`, `gitlabPath` and `gitlabBranch`, which at the moment are still supported but will be removed in the future.
:::

The `xmlTemplate` pipeline file can contain `%SECRET_TOKEN%`, which will be replaced by a secret token generated by the Console and used by the git provider Webhook.

In this way, when you create a new service from this template, the relative build pipeline will be automatically created on Jenkins, and the corresponding webhook will be set on the git provider.

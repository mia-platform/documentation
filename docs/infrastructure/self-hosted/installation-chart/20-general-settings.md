---
id: general-settings
title: General Settings
sidebar_label: General Settings
---

<!--
WARNING: this file was automatically generated by Mia-Platform Doc Aggregator.
DO NOT MODIFY IT BY HAND.
Instead, modify the source file and run the aggregator to regenerate this file.
-->

This document describes the required values that you will have to configure to work properly.

:::info
More specific configurations, such as those for the [Authentication Providers](./30-authentication-provider.md), [Client-Side Database Encryption](./40-mongodb-configurations-and-encryption.md), [File Storage](./50-file-storage.md) and [Email Connectivity](./60-email-setup.md) are described in separate documents.

If you want to fine tune resources for specific services the proper documentation can be found in [this page](./25-service-specific-configurations.md).
:::

## Runtime, Storage and Networking configurations

### Docker and runtime specific configurations

|            Name            |  Type   |          Description           | Default | Optional |
| :------------------------: | :-----: | :----------------------------: | :-----: | :------: |
|     `imagePullSecrets`     |  array  | An array of `imagePullSecrets` |  `[]`   |    ✅     |
| `podSecurityPolicyEnabled` | boolean |    Create the PSP resources    | `false` |    ✅     |

### Storage connection configurations

#### Required

|                Name                 |  Type  |                                                                      Description                                                                      | Default | Optional |
| :---------------------------------: | :----: | :---------------------------------------------------------------------------------------------------------------------------------------------------: | :-----: | :------: |
|     `configurations.consoleUrl`     | string |                                                       The URL where the console will be exposed                                                       |         |    ❌     |
|       `configurations.cmsUrl`       | string |                                                     The URL where the console CMS will be exposed                                                     |         |    ❌     |
| `configurations.repositoryHostname` | string |                                The hostname of the docker repository where the services docker image will be uploaded                                 |         |    ❌     |
|     `configurations.mongodbUrl`     | string | The connection url to a mongodb server or cluster, more info can be found [here](./40-mongodb-configurations-and-encryption.md#mongodb-configuration) |         |    ❌     |

#### Optional

|              Name              |  Type  |                     Description                     |                Default                 | Optional |
| :----------------------------: | :----: | :-------------------------------------------------: | :------------------------------------: | :------: |
|   `configurations.redisHost`   | string |            The host of a redis instance             | `redis.default.svc.cluster.local:6379` |    ✅     |
| `configurations.redisUsername` | string | The username used for redis instance authentication |                                        |    ✅     |
| `configurations.redisPassword` | string |        The password used for redis instance         |                                        |    ✅     |

### Self-Signed CA Bundles

If your Self-Hosted Console needs to interact with third party servers (e.g. MongoDB) with a self signed certificate you can provide the certification authority key material with the `additionalCABundle` configuration.

## Service account management configuration

Mia-Platform Console allows user to create custom Service Accounts to perform m2m authentication; to be able to properly sign service account session the Console requires a few specific configuration to be set with the `configurations.serviceAccountAuthProvider` key.

|         Name          |  Type  |                                Description                                 | Default | Optional |
| :-------------------: | :----: | :------------------------------------------------------------------------: | :-----: | :------: |
| `rsaPrivateKeyBase64` | string | Private key material for service account token signature encoded in Base64 |         |    ❌     |
|   `rsaPrivateKeyId`   | string |                           ID of the private key                            |         |    ❌     |
|  `rsaPrivateKeyPass`  | string |                        Password for the private key                        |         |    ❌     |
|    `clientIdSalt`     | string |                             salt for client id                             |         |    ❌     |
|    `jwtExpiresIn`     | string |          seconds defining the service account jwt expiration time          | `3600`  |    ✅     |

### How to generate secret values

For any doubt check out the [Client Credentials guide](../../../runtime_suite/client-credentials/jwt_keys) which provides useful examples.

* `rsaPrivateKeyBase64`:
  * `ssh-keygen -t rsa -b 4096 -m PEM -f private.key`
  * digit your passphrase (it is required for `rsaPrivateKeyPass`)
    * to generate the password we recommend using `openssl rand -hex 128`
  * encode the private key in base64 (`cat <PRIVATE_KEY> | base64`)
* `rsaPrivateKeyId`: `openssl rand -hex 24`
* `rsaPrivateKeyPass`: the passphrase you used during private key generation
* `clientIdSalt`: `openssl rand -hex 256`

## Generated Service specific resource configuration

To fine tune resources configurations for services directly generated from Mia-Platform Console you can tune the following configurations under the `configurations.defaultCoreResources` key:

|     Name      |  Type  |                            Description                             |                        Default                        | Optional |
| :-----------: | :----: | :----------------------------------------------------------------: | :---------------------------------------------------: | :------: |
| `apiGateway`  | object | The default RAM request and limit for API Gateway inside projects  |  `{ memoryLimitMin: "5Mi", memoryLimitMax: "25Mi" }`  |    ❌     |
| `crudService` | object | The default RAM request and limit for CRUD Service inside projects | `{ memoryLimitMin: "70Mi", memoryLimitMax: "250Mi" }` |    ❌     |

### Examples

```yaml
mia-console:
  configurations:
    ...
    defaultCoreResources:
      apiGateway:
        memoryLimitMin: "100Mi"
        memoryLimitMax: "300Mi"
```

## Additional optional configurations

|                      Name                      |  Type   |                                                                                                                                                                                      Description                                                                                                                                                                                       |             Default             | Optional |
| :--------------------------------------------: | :-----: | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------: | :-----------------------------: | :------: |
|                 `nameOverride`                 | string  |                                                                                                                                                                 Set up a value if you don’t want to use `mia-console`                                                                                                                                                                  |                                 |    ✅     |
|               `fullnameOverride`               | string  |                                                                                                                                             Set up a value if you want to set a fixed name for the release and not using the generated one                                                                                                                                             |                                 |    ✅     |
|                   `logLevel`                   | string  |                                                                                                                                                                                 The log level to setup                                                                                                                                                                                 |             `info`              |    ✅     |
|                 `registryHost`                 | string  |                                                                                                                                    The host of the registry where to pull the images, useful when you want to download images from a proxy registry                                                                                                                                    |     `nexus.mia-platform.eu`     |    ✅     |
|    `configurations.multitinenantNamespace`     | string  |                                                                                                                                                                            The multitenant partial hostname                                                                                                                                                                            | `multitenant.svc.cluster.local` |    ✅     |
| `configurations.customServicesImagePullSecret` | string  |                                                                                                      The name of the `imagePullSecret` containing the credentials to the private docker repository (_deprecated_, we reccomend to use `configurations.servicesImagePullSecrets`)                                                                                                       |                                 |    ✅     |
|   `configurations.servicesImagePullSecrets`    |  array  | The names of `imagePullSecret` containing the credentials to the private docker repositories that will be used to pull the images of all services of the projects, this key take precendence over `configurations.customServicesImagePullSecret`. You have to specify the secrets for both your own services and the ones handled by Console (e.g. cms-backend, crud-service, ecc...). |       `["nexus-gcloud"]`        |    ✅     |
|   `configurations.publicVariablesFolderName`   | string  |                                                                                                                                                          The name of the folder in which all public variables will be stored                                                                                                                                                           |                                 |    ✅     |
|  `configurations.deployServiceJenkinsRetryMs`  | integer |                                                                                                                                                    Controls Deploy Service Jenkins retries if no build is found (minimum value: 1)                                                                                                                                                     |                                 |    ✅     |

### Optional Feature Toggle configurations

|                           Name                           |  Type   |                                                                      Description                                                                      | Default | Optional |
| :------------------------------------------------------: | :-----: | :---------------------------------------------------------------------------------------------------------------------------------------------------: | :-----: | :------: |
| `configurations.enableClustersAndEnvironmentsManagement` | boolean |                                                     Enables Clusters and Environments management                                                      | `true`  |    ✅     |
|        `configurations.projectTemplateArchiveUrl`        | string  |                                                               New project template url                                                                |         |    ✅     |
|  `configurations.enableRuntimeServiceClusterSelection`   | boolean | Enable selection from supported runtime providers during cluster setup, if you disable it you will have to manually fill all the required information | `true`  |    ✅     |
|      `configurations.enableBackofficeConfigurator`       | boolean |                                                            Enable Backoffice Configurator                                                             | `true`  |    ✅     |
|            `configurations.enableFlowManager`            | boolean |                                                                  Enable Flow Manager                                                                  | `true`  |    ✅     |

### Optional telemetry configurations

|                    Name                    |  Type   |                                                Description                                                | Default | Optional |
| :----------------------------------------: | :-----: | :-------------------------------------------------------------------------------------------------------: | :-----: | :------: |
|  `configurations.enablePrometheusMetrics`  | boolean |       enable prometheus to collect metrics. This is a beta feature and could have breaking changes.       | `false` |    ✅     |
| `configurations.telemetry.tracing.enabled` | boolean | enable opentelemetry to collect tracing. This is an experimental feature and could have breaking changes. | `false` |    ✅     |
| `configurations.telemetry.tracing.address` | string  |            opentelemetry server address. At the moment, it is only supported a zipkin server.             | `false` |    ✅     |
|  `configurations.telemetry.tracing.port`   | number  |              opentelemetry server port. At the moment, it is only supported a zipkin server.              | `false` |    ✅     |

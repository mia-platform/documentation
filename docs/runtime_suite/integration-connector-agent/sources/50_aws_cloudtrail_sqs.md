---
id: aws_cloudtrail_sqs
title: AWS CloudTrail SQS
sidebar_label: Aws cloudtrail sqs
---

<!--
WARNING: this file was automatically generated by Mia-Platform Doc Aggregator.
DO NOT MODIFY IT BY HAND.
Instead, modify the source file and run the aggregator to regenerate this file.
-->

This source allows the integration connector agent to receive events from AWS CloudTrail published to SQS using Amazon EventBridge.

## AWS Setup

To use this source type, you need to configure your AWS account so that all changes of intereset tracked by CloudTrail
are published to an SQS queue.

To configure AWS, you need to:

- create a new trail in [CloudTrail](https://docs.aws.amazon.com/awscloudtrail/latest/userguide/cloudtrail-user-guide.html)
- create a new [SQS queue](https://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/welcome.html)
  dedicated to receiving CloudTrail events
- create an [EventBridge](https://docs.aws.amazon.com/eventbridge/latest/userguide/eb-setup.html) rule that maps
  the desired sources and sends them to the SQS queue

## Service Configuration

When configuring the AWS CloudTrail SQS source, you need to provide the following parameters in your configuration file:

- `type` (*string*): The type of the source, which should be set to `aws-cloudtrail-sqs`.
- `queueUrl` (*string*): The URL of the SQS queue to which CloudTrail events are published.
- `region` (*string*): The AWS region where the SQS queue is located.
- `accessKeyId` (*string*): access key ID from AWS
- `secretAccessKey` ([*SecretSource*](../20_install.md#secretsource)): secret access key from AWS
- `sessionToken` ([*SecretSource*](../20_install.md#secretsource)): session token from AWS

### Example

```json
{
	"type": "aws-cloudtrail-sqs",
	"queueUrl": "https://sqs.eu-north-1.amazonaws.com/123123123123/my-sqs-queue",
	"accessKeyId": "",
	"secretAccessKey": {"fromEnv": "AWS_SQS_SECRET_ACCESS_KEY"},
	"sessionToken": {"fromEnv": "AWS_SQS_SESSION_TOKEN"},
}
```

## Supported Events

The AWS CloudTrail SQS source supports the following CloudTrail sources:

- `aws.s3`
- `aws.lambda`

For the above sources, the integration connector agent supports the following event types:

- All `Create*` events
- All `Delete*` events
- All `Update*` events
- All `Publish*` events

---
id: control_plane
title: Control Plane Configuration
sidebar_label: Control Plane
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

Fast Data Control Plane is the service that:

* keeps track of the state of the different pipelines of a runtime;
* reiceves user's interaction with the dedicated frontend, to update pipeline's state accordingly;  
* receives feedbacks from workloads, to acknowledge that they're up-and-running in the pipelines they've been linked to. 

## State Persistence

The Control Plane stores for each runtime the latest state of all pipelines (either domain or single view) and its artifacts in a MongoDB collection, 
that is queried directly by the service at startup to retrieve the latest available state. 

:::info
To discover more about state persistence configuration, you can check [its dedicated section](?control-plane-configuration=persistence#persistence)
:::

This collection can change based on user interactions through the frontend.

## Runtime Communication

Communications to/from runtime's workloads happen through two different channels, namely _State Channel_ and _Feedback Channel_. 

:::info

:::

### State Channel

The _State Channel_ is where the Control Plane sends the current state of each pipeline. Each pipeline has a general state, that can be overridden.

For each pipeline, there could be different `overrides` that can change individually the state of a particular artifact.

Also, each artifact can have additional `overrides` for each stage of the pipeline where is employed. 

The state that can be set at pipeline level, or artifact level, or stage level is an _Activation State_: it can either `pause` or `resume`, 
which will be used by workloads to stop/resume consumption of data.   

### Feedback Channel

The _Feedback Channel_ is where the workloads will notify the Control Plane about the state of their artifacts. This is needed to inform the Control Plane that:

- the artifacts are up-and-running;
- the workloads have their state updated correctly after a message from the state channel

The workloads will send messages through the feedback channel **periodically**.

## Configuration

_Configuration of Control Plane_ is a straightforward process that involves setting up a ConfigMap and specifying essential environment variables.

### Environment Variables

Control Plane can be customized using the following environment variables:

| Name                                      | Required | Description                                                                                                                                                               | Default Value                              |
|-------------------------------------------|----------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------|
| `HTTP_PORT`                               | -        | This variable determines the TCP port where the  ** HTTP controller **  binds its listener.                                                                               | 3000                                       |
| `LOG_LEVEL`                               | -        | Specify the centralized application log level, choosing from options such as  `debug` ,  `error` ,  `fatal` ,  `info` ,  `silent` ,  `trace` , or  `warn` .               | `info`                                     |
| `FD_CONTROL_PLANE_CONFIGURATION_FILEPATH` | -        | Set the location of the configuration file.                                                                                                                               | ` ~/.fd/control-plane/configuration.json ` |

### Config Map 

The configuration of the service is handled by a JSON file whose location is defined by the `FD_CONTROL_PLANE_CONFIGURATION_FILEPATH`.

The [Control Plane applications](/docs/runtime_suite_applications/control-plane/10_overview.md) provide a sample of this JSON in a dedicated Config Map, named `config map`.

<Tabs groupId='control-plane-configuration' queryString>

<TabItem value="persistence" label="Persistence" default>

#### Persistence

The object `persistence` configures the layer of runtime state persistence where Control Plane stores the next desired state for its runtime.

It must point to a `MongoDB` collection, available in a [`replicaSet` enabled database](https://www.mongodb.com/docs/manual/replication/).

Available interfaces include:

- `MongoDB` client

###### Example

```json
{
    // ...other control plane configurations
    "persistence": {
        "type": "mongodb",
        "configuration": {
            "url": "mongodb://localhost:27017/fast-data?replicaSet=local"
        },
        "collection": {
            "name": "runtime-state"
        }
    }
    // ...other control plane configurations
}
```

</TabItem>

<TabItem value="runtime" label="Runtime">

#### Runtime

The object `runtime` configures: 

- the state channel that the Control Plane uses to dispatch the next desired state;
- the feedback channel where Control Plane receives workloads feedbacks about their inner states. 

Available interfaces are:

#### Kafka 

Both feedback and state channels can be managed by a Kafka broker. In particular:

- the state channel will have a Kafka Producer that sends desired states to a dedicated topic (referred to as _Action Topic_)
- the feedback channel will have a Kafka Consumer that reads workloads feedbacks from a dedicated topic (referred to as _Heartbeat Topic_)

###### Example

```json
{
    // ...other control plane configurations
    "runtime": {
        "feedback": {
          "configuration": {
            // to see all the available configuration options, go over the JSON schema
            "allow.auto.create.topics": "true",
            "bootstrap.servers": "localhost:9094"
          },
          "consumer": {
            "topic": "heartbeat-topic",
            "group.id": "control-plane-group-id"
          },
          "type": "kafka"
        },
        "state": {
          "configuration": {
            // to see all the available configuration options, go over the JSON schema
            "allow.auto.create.topics": "true",
            "bootstrap.servers": "localhost:9094"
          },
          "producer": {
            "topic": "action-topic"
          },
          "type": "kafka"
        }
    }
    // ...other control plane configurations
}
```

#### gRPC

Both feedback and state channels can be managed by a gRPC server instance managed by the Control Plane, 
which creates a bi-directional streaming procedure that:

- receives feedbacks from workloads
- dispatch states to services 

##### Example

```json
{
    // ...other control plane configurations
    "runtime": {
        "feedback": {
          "type": "grpc"
        },
        "state": {
          "type": "grpc"
        }
    }
    // ...other control plane configurations
}
```

:::info 
By default, the gRPC server is exposed over the default gRPC protocol port (50051). 
This value can be overriden in the [`settings` section](link) 
::: 

#### gRPC + Kafka 

It's also possible to have:

- a state channel managed by a topic in a Kafka broker;
- a feedback channel managed by a gRPC server with a client-side streaming request

###### Example

```json
{
    // ...other control plane configurations
    "runtime": {
        "feedback": {
          "type": "grpc"
        },
        "state": {
          "configuration": {
            // to see all the available configuration options, go over the JSON schema
            "allow.auto.create.topics": "true",
            "bootstrap.servers": "localhost:9094"
          },
          "producer": {
            "topic": "action-topic"
          },
          "type": "kafka"
        }
    }
    // ...other control plane configurations
}
```

</TabItem>

<TabItem value="settings" label="Settings">

#### Settings

The overall setup of Control Plane is tuned in the `settings` object, allowing you to configure several aspects of the services, such as:

- channels setup, including:
  - buffer timeout used to delay state channel notifications
  - gRPC server configuration
  - runtime heartbeat in milliseconds, used to tell whether a workload is alive or not 
- server APIs, including:
  - Fast Data control endpoint
  - Metrics
  - Probes
- Frontend/Website endpoint locations

Example:

```json
{
    // ...other control plane configurations
    "settings": {
        "server": {
          "prefix": "/control-plane/",
          "website": {
            "url": "/"
          }
        }
    } 
    // ...other control plane configurations
}
```

:::info 
To have a full overview of the `settings` properties, you can check the JSON Schema specifications
provided in this section.
::: 

</TabItem>

</Tabs>

### Examples

<details>
<summary>ConfigMap Schema</summary>
<p>

```json
{
  "$ref": "#/definitions/control-plane",
  "definitions": {
    "control-plane": {
      "type": "object",
      "properties": {
        "persistence": {
          "type": "object",
          "properties": {
            "collection": {
              "type": "object",
              "properties": {
                "name": {
                  "type": "string"
                },
                "updates": {
                  "type": "object",
                  "properties": {
                    "millis": {
                      "type": "number"
                    }
                  },
                  "additionalProperties": false
                }
              },
              "required": [
                "name"
              ],
              "additionalProperties": false
            },
            "configuration": {
              "type": "object",
              "properties": {
                "database": {
                  "type": "string"
                },
                "url": {
                  "anyOf": [
                    {
                      "type": "string"
                    },
                    {
                      "type": "object",
                      "properties": {
                        "encoding": {
                          "type": "string",
                          "enum": [
                            "base64"
                          ]
                        },
                        "key": {
                          "type": "string"
                        },
                        "type": {
                          "type": "string",
                          "const": "env"
                        }
                      },
                      "required": [
                        "key",
                        "type"
                      ],
                      "additionalProperties": false
                    },
                    {
                      "type": "object",
                      "properties": {
                        "encoding": {
                          "type": "string",
                          "enum": [
                            "base64"
                          ]
                        },
                        "key": {
                          "type": "string"
                        },
                        "path": {
                          "type": "string"
                        },
                        "type": {
                          "type": "string",
                          "const": "file"
                        }
                      },
                      "required": [
                        "path",
                        "type"
                      ],
                      "additionalProperties": false
                    }
                  ]
                }
              },
              "required": [
                "url"
              ],
              "additionalProperties": false
            },
            "type": {
              "type": "string",
              "const": "mongodb"
            }
          },
          "required": [
            "collection",
            "configuration",
            "type"
          ],
          "additionalProperties": false
        },
        "runtime": {
          "type": "object",
          "properties": {
            "feedback": {
              "anyOf": [
                {
                  "type": "object",
                  "properties": {
                    "configuration": {},
                    "type": {
                      "type": "string",
                      "const": "grpc"
                    }
                  },
                  "required": [
                    "type"
                  ],
                  "additionalProperties": false,
                  "default": {
                    "type": "grpc"
                  }
                },
                {
                  "allOf": [
                    {
                      "type": "object",
                      "properties": {
                        "configuration": {
                          "type": "object",
                          "properties": {
                            "allow.auto.create.topics": {
                              "type": "string",
                              "enum": [
                                "true",
                                "false"
                              ]
                            },
                            "auto.offset.reset": {
                              "type": "string",
                              "enum": [
                                "earliest",
                                "latest"
                              ]
                            },
                            "bootstrap.servers": {
                              "anyOf": [
                                {
                                  "type": "string"
                                },
                                {
                                  "type": "object",
                                  "properties": {
                                    "encoding": {
                                      "type": "string",
                                      "enum": [
                                        "base64"
                                      ]
                                    },
                                    "key": {
                                      "type": "string"
                                    },
                                    "type": {
                                      "type": "string",
                                      "const": "env"
                                    }
                                  },
                                  "required": [
                                    "key",
                                    "type"
                                  ],
                                  "additionalProperties": false
                                },
                                {
                                  "type": "object",
                                  "properties": {
                                    "encoding": {
                                      "type": "string",
                                      "enum": [
                                        "base64"
                                      ]
                                    },
                                    "key": {
                                      "type": "string"
                                    },
                                    "path": {
                                      "type": "string"
                                    },
                                    "type": {
                                      "type": "string",
                                      "const": "file"
                                    }
                                  },
                                  "required": [
                                    "path",
                                    "type"
                                  ],
                                  "additionalProperties": false
                                }
                              ]
                            },
                            "client.id": {
                              "type": "string"
                            },
                            "enable.auto.commit": {
                              "type": "string",
                              "enum": [
                                "true",
                                "false"
                              ]
                            },
                            "sasl.mechanism": {
                              "type": "string",
                              "enum": [
                                "PLAIN",
                                "SCRAM-SHA-256",
                                "SCRAM-SHA-512",
                                "OAUTHBEARER"
                              ]
                            },
                            "sasl.password": {
                              "anyOf": [
                                {
                                  "type": "string"
                                },
                                {
                                  "type": "object",
                                  "properties": {
                                    "encoding": {
                                      "type": "string",
                                      "enum": [
                                        "base64"
                                      ]
                                    },
                                    "key": {
                                      "type": "string"
                                    },
                                    "type": {
                                      "type": "string",
                                      "const": "env"
                                    }
                                  },
                                  "required": [
                                    "key",
                                    "type"
                                  ],
                                  "additionalProperties": false
                                },
                                {
                                  "type": "object",
                                  "properties": {
                                    "encoding": {
                                      "type": "string",
                                      "enum": [
                                        "base64"
                                      ]
                                    },
                                    "key": {
                                      "type": "string"
                                    },
                                    "path": {
                                      "type": "string"
                                    },
                                    "type": {
                                      "type": "string",
                                      "const": "file"
                                    }
                                  },
                                  "required": [
                                    "path",
                                    "type"
                                  ],
                                  "additionalProperties": false
                                }
                              ]
                            },
                            "sasl.username": {
                              "anyOf": [
                                {
                                  "type": "string"
                                },
                                {
                                  "type": "object",
                                  "properties": {
                                    "encoding": {
                                      "type": "string",
                                      "enum": [
                                        "base64"
                                      ]
                                    },
                                    "key": {
                                      "type": "string"
                                    },
                                    "type": {
                                      "type": "string",
                                      "const": "env"
                                    }
                                  },
                                  "required": [
                                    "key",
                                    "type"
                                  ],
                                  "additionalProperties": false
                                },
                                {
                                  "type": "object",
                                  "properties": {
                                    "encoding": {
                                      "type": "string",
                                      "enum": [
                                        "base64"
                                      ]
                                    },
                                    "key": {
                                      "type": "string"
                                    },
                                    "path": {
                                      "type": "string"
                                    },
                                    "type": {
                                      "type": "string",
                                      "const": "file"
                                    }
                                  },
                                  "required": [
                                    "path",
                                    "type"
                                  ],
                                  "additionalProperties": false
                                }
                              ]
                            },
                            "security.protocol": {
                              "type": "string",
                              "enum": [
                                "PLAINTEXT",
                                "SSL",
                                "SASL_PLAINTEXT",
                                "SASL_SSL"
                              ]
                            },
                            "session.timeout.ms": {
                              "type": "number"
                            },
                            "ssl.key.password": {
                              "anyOf": [
                                {
                                  "type": "string"
                                },
                                {
                                  "type": "object",
                                  "properties": {
                                    "encoding": {
                                      "type": "string",
                                      "enum": [
                                        "base64"
                                      ]
                                    },
                                    "key": {
                                      "type": "string"
                                    },
                                    "type": {
                                      "type": "string",
                                      "const": "env"
                                    }
                                  },
                                  "required": [
                                    "key",
                                    "type"
                                  ],
                                  "additionalProperties": false
                                },
                                {
                                  "type": "object",
                                  "properties": {
                                    "encoding": {
                                      "type": "string",
                                      "enum": [
                                        "base64"
                                      ]
                                    },
                                    "key": {
                                      "type": "string"
                                    },
                                    "path": {
                                      "type": "string"
                                    },
                                    "type": {
                                      "type": "string",
                                      "const": "file"
                                    }
                                  },
                                  "required": [
                                    "path",
                                    "type"
                                  ],
                                  "additionalProperties": false
                                }
                              ]
                            },
                            "ssl.keystore.certificate.chain": {
                              "anyOf": [
                                {
                                  "type": "string"
                                },
                                {
                                  "type": "object",
                                  "properties": {
                                    "encoding": {
                                      "type": "string",
                                      "enum": [
                                        "base64"
                                      ]
                                    },
                                    "key": {
                                      "type": "string"
                                    },
                                    "type": {
                                      "type": "string",
                                      "const": "env"
                                    }
                                  },
                                  "required": [
                                    "key",
                                    "type"
                                  ],
                                  "additionalProperties": false
                                },
                                {
                                  "type": "object",
                                  "properties": {
                                    "encoding": {
                                      "type": "string",
                                      "enum": [
                                        "base64"
                                      ]
                                    },
                                    "key": {
                                      "type": "string"
                                    },
                                    "path": {
                                      "type": "string"
                                    },
                                    "type": {
                                      "type": "string",
                                      "const": "file"
                                    }
                                  },
                                  "required": [
                                    "path",
                                    "type"
                                  ],
                                  "additionalProperties": false
                                }
                              ]
                            },
                            "ssl.keystore.key": {
                              "anyOf": [
                                {
                                  "type": "string"
                                },
                                {
                                  "type": "object",
                                  "properties": {
                                    "encoding": {
                                      "type": "string",
                                      "enum": [
                                        "base64"
                                      ]
                                    },
                                    "key": {
                                      "type": "string"
                                    },
                                    "type": {
                                      "type": "string",
                                      "const": "env"
                                    }
                                  },
                                  "required": [
                                    "key",
                                    "type"
                                  ],
                                  "additionalProperties": false
                                },
                                {
                                  "type": "object",
                                  "properties": {
                                    "encoding": {
                                      "type": "string",
                                      "enum": [
                                        "base64"
                                      ]
                                    },
                                    "key": {
                                      "type": "string"
                                    },
                                    "path": {
                                      "type": "string"
                                    },
                                    "type": {
                                      "type": "string",
                                      "const": "file"
                                    }
                                  },
                                  "required": [
                                    "path",
                                    "type"
                                  ],
                                  "additionalProperties": false
                                }
                              ]
                            },
                            "ssl.keystore.location": {
                              "type": "string"
                            },
                            "ssl.keystore.type": {
                              "type": "string",
                              "const": "PEM",
                              "default": "PEM"
                            },
                            "ssl.truststore.certificates": {
                              "anyOf": [
                                {
                                  "type": "string"
                                },
                                {
                                  "type": "object",
                                  "properties": {
                                    "encoding": {
                                      "type": "string",
                                      "enum": [
                                        "base64"
                                      ]
                                    },
                                    "key": {
                                      "type": "string"
                                    },
                                    "type": {
                                      "type": "string",
                                      "const": "env"
                                    }
                                  },
                                  "required": [
                                    "key",
                                    "type"
                                  ],
                                  "additionalProperties": false
                                },
                                {
                                  "type": "object",
                                  "properties": {
                                    "encoding": {
                                      "type": "string",
                                      "enum": [
                                        "base64"
                                      ]
                                    },
                                    "key": {
                                      "type": "string"
                                    },
                                    "path": {
                                      "type": "string"
                                    },
                                    "type": {
                                      "type": "string",
                                      "const": "file"
                                    }
                                  },
                                  "required": [
                                    "path",
                                    "type"
                                  ],
                                  "additionalProperties": false
                                }
                              ]
                            },
                            "ssl.truststore.location": {
                              "type": "string"
                            },
                            "ssl.truststore.type": {
                              "type": "string",
                              "const": "PEM",
                              "default": "PEM"
                            }
                          },
                          "required": [
                            "bootstrap.servers"
                          ],
                          "additionalProperties": false
                        },
                        "type": {
                          "type": "string",
                          "const": "kafka"
                        }
                      },
                      "required": [
                        "configuration",
                        "type"
                      ]
                    },
                    {
                      "type": "object",
                      "properties": {
                        "consumer": {
                          "type": "object",
                          "properties": {
                            "group.id": {
                              "type": "string"
                            },
                            "topic": {
                              "type": "string"
                            }
                          },
                          "required": [
                            "group.id",
                            "topic"
                          ],
                          "additionalProperties": false
                        }
                      },
                      "required": [
                        "consumer"
                      ]
                    }
                  ]
                }
              ]
            },
            "state": {
              "anyOf": [
                {
                  "type": "object",
                  "properties": {
                    "configuration": {},
                    "type": {
                      "type": "string",
                      "const": "grpc"
                    }
                  },
                  "required": [
                    "type"
                  ],
                  "additionalProperties": false,
                  "default": {
                    "type": "grpc"
                  }
                },
                {
                  "allOf": [
                    {
                      "type": "object",
                      "properties": {
                        "configuration": {
                          "type": "object",
                          "properties": {
                            "allow.auto.create.topics": {
                              "type": "string",
                              "enum": [
                                "true",
                                "false"
                              ]
                            },
                            "auto.offset.reset": {
                              "type": "string",
                              "enum": [
                                "earliest",
                                "latest"
                              ]
                            },
                            "bootstrap.servers": {
                              "anyOf": [
                                {
                                  "type": "string"
                                },
                                {
                                  "type": "object",
                                  "properties": {
                                    "encoding": {
                                      "type": "string",
                                      "enum": [
                                        "base64"
                                      ]
                                    },
                                    "key": {
                                      "type": "string"
                                    },
                                    "type": {
                                      "type": "string",
                                      "const": "env"
                                    }
                                  },
                                  "required": [
                                    "key",
                                    "type"
                                  ],
                                  "additionalProperties": false
                                },
                                {
                                  "type": "object",
                                  "properties": {
                                    "encoding": {
                                      "type": "string",
                                      "enum": [
                                        "base64"
                                      ]
                                    },
                                    "key": {
                                      "type": "string"
                                    },
                                    "path": {
                                      "type": "string"
                                    },
                                    "type": {
                                      "type": "string",
                                      "const": "file"
                                    }
                                  },
                                  "required": [
                                    "path",
                                    "type"
                                  ],
                                  "additionalProperties": false
                                }
                              ]
                            },
                            "client.id": {
                              "type": "string"
                            },
                            "enable.auto.commit": {
                              "type": "string",
                              "enum": [
                                "true",
                                "false"
                              ]
                            },
                            "sasl.mechanism": {
                              "type": "string",
                              "enum": [
                                "PLAIN",
                                "SCRAM-SHA-256",
                                "SCRAM-SHA-512",
                                "OAUTHBEARER"
                              ]
                            },
                            "sasl.password": {
                              "anyOf": [
                                {
                                  "type": "string"
                                },
                                {
                                  "type": "object",
                                  "properties": {
                                    "encoding": {
                                      "type": "string",
                                      "enum": [
                                        "base64"
                                      ]
                                    },
                                    "key": {
                                      "type": "string"
                                    },
                                    "type": {
                                      "type": "string",
                                      "const": "env"
                                    }
                                  },
                                  "required": [
                                    "key",
                                    "type"
                                  ],
                                  "additionalProperties": false
                                },
                                {
                                  "type": "object",
                                  "properties": {
                                    "encoding": {
                                      "type": "string",
                                      "enum": [
                                        "base64"
                                      ]
                                    },
                                    "key": {
                                      "type": "string"
                                    },
                                    "path": {
                                      "type": "string"
                                    },
                                    "type": {
                                      "type": "string",
                                      "const": "file"
                                    }
                                  },
                                  "required": [
                                    "path",
                                    "type"
                                  ],
                                  "additionalProperties": false
                                }
                              ]
                            },
                            "sasl.username": {
                              "anyOf": [
                                {
                                  "type": "string"
                                },
                                {
                                  "type": "object",
                                  "properties": {
                                    "encoding": {
                                      "type": "string",
                                      "enum": [
                                        "base64"
                                      ]
                                    },
                                    "key": {
                                      "type": "string"
                                    },
                                    "type": {
                                      "type": "string",
                                      "const": "env"
                                    }
                                  },
                                  "required": [
                                    "key",
                                    "type"
                                  ],
                                  "additionalProperties": false
                                },
                                {
                                  "type": "object",
                                  "properties": {
                                    "encoding": {
                                      "type": "string",
                                      "enum": [
                                        "base64"
                                      ]
                                    },
                                    "key": {
                                      "type": "string"
                                    },
                                    "path": {
                                      "type": "string"
                                    },
                                    "type": {
                                      "type": "string",
                                      "const": "file"
                                    }
                                  },
                                  "required": [
                                    "path",
                                    "type"
                                  ],
                                  "additionalProperties": false
                                }
                              ]
                            },
                            "security.protocol": {
                              "type": "string",
                              "enum": [
                                "PLAINTEXT",
                                "SSL",
                                "SASL_PLAINTEXT",
                                "SASL_SSL"
                              ]
                            },
                            "session.timeout.ms": {
                              "type": "number"
                            },
                            "ssl.key.password": {
                              "anyOf": [
                                {
                                  "type": "string"
                                },
                                {
                                  "type": "object",
                                  "properties": {
                                    "encoding": {
                                      "type": "string",
                                      "enum": [
                                        "base64"
                                      ]
                                    },
                                    "key": {
                                      "type": "string"
                                    },
                                    "type": {
                                      "type": "string",
                                      "const": "env"
                                    }
                                  },
                                  "required": [
                                    "key",
                                    "type"
                                  ],
                                  "additionalProperties": false
                                },
                                {
                                  "type": "object",
                                  "properties": {
                                    "encoding": {
                                      "type": "string",
                                      "enum": [
                                        "base64"
                                      ]
                                    },
                                    "key": {
                                      "type": "string"
                                    },
                                    "path": {
                                      "type": "string"
                                    },
                                    "type": {
                                      "type": "string",
                                      "const": "file"
                                    }
                                  },
                                  "required": [
                                    "path",
                                    "type"
                                  ],
                                  "additionalProperties": false
                                }
                              ]
                            },
                            "ssl.keystore.certificate.chain": {
                              "anyOf": [
                                {
                                  "type": "string"
                                },
                                {
                                  "type": "object",
                                  "properties": {
                                    "encoding": {
                                      "type": "string",
                                      "enum": [
                                        "base64"
                                      ]
                                    },
                                    "key": {
                                      "type": "string"
                                    },
                                    "type": {
                                      "type": "string",
                                      "const": "env"
                                    }
                                  },
                                  "required": [
                                    "key",
                                    "type"
                                  ],
                                  "additionalProperties": false
                                },
                                {
                                  "type": "object",
                                  "properties": {
                                    "encoding": {
                                      "type": "string",
                                      "enum": [
                                        "base64"
                                      ]
                                    },
                                    "key": {
                                      "type": "string"
                                    },
                                    "path": {
                                      "type": "string"
                                    },
                                    "type": {
                                      "type": "string",
                                      "const": "file"
                                    }
                                  },
                                  "required": [
                                    "path",
                                    "type"
                                  ],
                                  "additionalProperties": false
                                }
                              ]
                            },
                            "ssl.keystore.key": {
                              "anyOf": [
                                {
                                  "type": "string"
                                },
                                {
                                  "type": "object",
                                  "properties": {
                                    "encoding": {
                                      "type": "string",
                                      "enum": [
                                        "base64"
                                      ]
                                    },
                                    "key": {
                                      "type": "string"
                                    },
                                    "type": {
                                      "type": "string",
                                      "const": "env"
                                    }
                                  },
                                  "required": [
                                    "key",
                                    "type"
                                  ],
                                  "additionalProperties": false
                                },
                                {
                                  "type": "object",
                                  "properties": {
                                    "encoding": {
                                      "type": "string",
                                      "enum": [
                                        "base64"
                                      ]
                                    },
                                    "key": {
                                      "type": "string"
                                    },
                                    "path": {
                                      "type": "string"
                                    },
                                    "type": {
                                      "type": "string",
                                      "const": "file"
                                    }
                                  },
                                  "required": [
                                    "path",
                                    "type"
                                  ],
                                  "additionalProperties": false
                                }
                              ]
                            },
                            "ssl.keystore.location": {
                              "type": "string"
                            },
                            "ssl.keystore.type": {
                              "type": "string",
                              "const": "PEM",
                              "default": "PEM"
                            },
                            "ssl.truststore.certificates": {
                              "anyOf": [
                                {
                                  "type": "string"
                                },
                                {
                                  "type": "object",
                                  "properties": {
                                    "encoding": {
                                      "type": "string",
                                      "enum": [
                                        "base64"
                                      ]
                                    },
                                    "key": {
                                      "type": "string"
                                    },
                                    "type": {
                                      "type": "string",
                                      "const": "env"
                                    }
                                  },
                                  "required": [
                                    "key",
                                    "type"
                                  ],
                                  "additionalProperties": false
                                },
                                {
                                  "type": "object",
                                  "properties": {
                                    "encoding": {
                                      "type": "string",
                                      "enum": [
                                        "base64"
                                      ]
                                    },
                                    "key": {
                                      "type": "string"
                                    },
                                    "path": {
                                      "type": "string"
                                    },
                                    "type": {
                                      "type": "string",
                                      "const": "file"
                                    }
                                  },
                                  "required": [
                                    "path",
                                    "type"
                                  ],
                                  "additionalProperties": false
                                }
                              ]
                            },
                            "ssl.truststore.location": {
                              "type": "string"
                            },
                            "ssl.truststore.type": {
                              "type": "string",
                              "const": "PEM",
                              "default": "PEM"
                            }
                          },
                          "required": [
                            "bootstrap.servers"
                          ],
                          "additionalProperties": false
                        },
                        "type": {
                          "type": "string",
                          "const": "kafka"
                        }
                      },
                      "required": [
                        "configuration",
                        "type"
                      ]
                    },
                    {
                      "type": "object",
                      "properties": {
                        "producer": {
                          "type": "object",
                          "properties": {
                            "topic": {
                              "type": "string"
                            }
                          },
                          "required": [
                            "topic"
                          ],
                          "additionalProperties": false
                        }
                      },
                      "required": [
                        "producer"
                      ]
                    }
                  ]
                }
              ]
            }
          },
          "additionalProperties": false
        },
        "settings": {
          "type": "object",
          "properties": {
            "channels": {
              "type": "object",
              "properties": {
                "buffer": {
                  "type": "object",
                  "properties": {
                    "millis": {
                      "type": "number"
                    }
                  },
                  "additionalProperties": false
                },
                "grpc": {
                  "type": "object",
                  "properties": {
                    "mode": {
                      "type": "string",
                      "enum": [
                        "json",
                        "protobuf"
                      ],
                      "default": "protobuf"
                    },
                    "port": {
                      "type": "number",
                      "default": 50051
                    }
                  },
                  "additionalProperties": false
                },
                "runtimeHeartbeat": {
                  "type": "object",
                  "properties": {},
                  "additionalProperties": false
                }
              },
              "additionalProperties": false
            },
            "server": {
              "type": "object",
              "properties": {
                "apis": {
                  "type": "object",
                  "properties": {
                    "controllers": {
                      "type": "object",
                      "properties": {
                        "fast-data": {
                          "type": "string",
                          "default": "/fast-data"
                        },
                        "prefix": {
                          "type": "string"
                        },
                        "settings": {
                          "type": "object",
                          "properties": {
                            "feedbackBuffer": {
                              "type": "object",
                              "properties": {
                                "millis": {
                                  "type": "number"
                                }
                              },
                              "additionalProperties": false
                            },
                            "policies": {
                              "type": "object",
                              "properties": {
                                "edit": {
                                  "type": "string"
                                },
                                "view": {
                                  "type": "string"
                                }
                              },
                              "additionalProperties": false
                            }
                          },
                          "additionalProperties": false
                        }
                      },
                      "additionalProperties": false
                    },
                    "probes": {
                      "type": "object",
                      "properties": {
                        "healthcheck": {
                          "type": "string",
                          "default": "/healthz"
                        },
                        "metrics": {
                          "type": "string",
                          "default": "/metrics"
                        },
                        "prefix": {
                          "type": "string",
                          "default": "/-/"
                        },
                        "readiness": {
                          "type": "string",
                          "default": "/ready"
                        }
                      },
                      "additionalProperties": false
                    }
                  },
                  "additionalProperties": false
                },
                "authorization": {
                  "type": "object",
                  "properties": {
                    "apiKey": {
                      "anyOf": [
                        {
                          "type": "string"
                        },
                        {
                          "type": "object",
                          "properties": {
                            "encoding": {
                              "type": "string",
                              "enum": [
                                "base64"
                              ]
                            },
                            "key": {
                              "type": "string"
                            },
                            "type": {
                              "type": "string",
                              "const": "env"
                            }
                          },
                          "required": [
                            "key",
                            "type"
                          ],
                          "additionalProperties": false
                        },
                        {
                          "type": "object",
                          "properties": {
                            "encoding": {
                              "type": "string",
                              "enum": [
                                "base64"
                              ]
                            },
                            "key": {
                              "type": "string"
                            },
                            "path": {
                              "type": "string"
                            },
                            "type": {
                              "type": "string",
                              "const": "file"
                            }
                          },
                          "required": [
                            "path",
                            "type"
                          ],
                          "additionalProperties": false
                        }
                      ]
                    }
                  },
                  "required": [
                    "apiKey"
                  ],
                  "additionalProperties": false
                },
                "prefix": {
                  "type": "string",
                  "default": "/"
                },
                "swagger": {
                  "type": "object",
                  "properties": {
                    "prefix": {
                      "type": "string",
                      "default": "/documentation"
                    }
                  },
                  "additionalProperties": false
                },
                "website": {
                  "type": "object",
                  "properties": {
                    "root": {
                      "type": "string",
                      "default": "./website"
                    },
                    "security": {
                      "type": "object",
                      "properties": {
                        "x-frame-options": {
                          "type": "string",
                          "enum": [
                            "sameorigin",
                            "deny"
                          ]
                        }
                      },
                      "additionalProperties": false
                    },
                    "url": {
                      "type": "string",
                      "default": "/website/"
                    }
                  },
                  "additionalProperties": false
                }
              },
              "additionalProperties": false
            }
          },
          "additionalProperties": false
        }
      },
      "required": [
        "persistence"
      ],
      "additionalProperties": false,
      "description": "Json schema for the control-plane configuration file. File is by default loaded at **~/.fd/control-plane/configuration.json**. Default location can be configured using the environment variable **FD\\_CONTROL_PLANE\\_CONFIGURATION\\_FILEPATH**."
    }
  },
  "$schema": "http://json-schema.org/draft-07/schema#"
}
```

</p>
</details>


## Compatibility Matrix

### Infrastructure

Ensure compatibility with external services using the following matrix. Initially, only the persistence layer is required to be available at startup, as configured runtimes can be zero.

| Control Plane | MongoDB | Kafka |
|:-------------:|:-------:|:-----:|
|     1.0.0     |  >=5    | >=2.8 |

### Fast Data services


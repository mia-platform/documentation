---
id: performance
title: Performance
sidebar_label: Performance
---

<!--
WARNING: this file was automatically generated by Mia-Platform Doc Aggregator.
DO NOT MODIFY IT BY HAND.
Instead, modify the source file and run the aggregator to regenerate this file.
-->

This section provides a brief overview of the service performance and recommendations about CPU and RAM requests and limits in order to reach optimal performances on common scenarios.

Results have been obtained through specific tests implementing a series of requests to the Notification Manager service.

Specifically, all the [default events][default-events] have been submitted randomly and repeatedly to the `POST /notification-events/` endpoint to measure CPU and RAM usage.

Following our suggested requests and limits, you can serve more users by simply scaling the service horizontally, i.e. increasing the number of replicas proportionally to the expected traffic.

## Test without notifications

This test suite helped us establish a baseline for the performance of the service when no notification is actually send.
We tested this scenario without configuring any notification setting.
Each test was left running for 5 minutes.

| Users | Replicas | Requests Per Second | Average response time (in s) | Median response time (in s) | Min response time (in s) | Max response time (ms) |
|:-----:|:--------:|:-------------------:|:----------------------------:|:---------------------------:|:------------------------:|:----------------------:|
|   5   |    1     |         1.2         |              1               |             0.3             |           0.01           |           11           |
|   5   |    2     |          1          |              2               |             0.3             |           0.01           |           60           |
|  10   |    2     |         1.6         |              2               |             0.4             |           0.01           |           26           |

## Test with notifications

This test suite was designed to measure the collective performance of the Notification Manager alongside the other services it depends on to send messages and set reminders.
Each test sent on average an email and an SMS message to each participant - typically the doctor and the patient - and was left running for 5 minutes.

| Users | Replicas | Requests Per Second | Average response time (in s) | Median response time (in s) | Min response time (in s) | Max response time (s) |
|:-----:|:--------:|:-------------------:|:----------------------------:|:---------------------------:|:------------------------:|:---------------------:|
|   1   |    1     |          0          |              13              |              3              |            1             |          60           |
|   5   |    1     |         0.6         |              9               |              4              |            1             |          60           |
|   5   |    2     |         0.4         |              29              |             17              |            1             |          60           |

## Recommended configuration

The overall performance of the Notification Manager, in terms of response time, depends partially on the performance of the external services used to send messages and set reminders.
The following table provides a recommended configuration for the services that mostly affect the Notification Manager performance.
We recommending adding more replicas of each service, according to your usage scenario and level of traffic.

| Service                   | CPU Requests (in Mi) | CPU Limits (in Mi) | Memory Requests (in m) | Memory Limits (in m) | Notes                                                |
|---------------------------|----------------------|--------------------|------------------------|----------------------|------------------------------------------------------|
| Notification Manager      | 50                   | 120                | 50                     | 100                  |                                                      |
| Mail Notification Service | 25                   | 60                 | 50                     | 100                  |                                                      |
| SMS Service               | 100                  | 100                | 150                    | 150                  | Remember to configure the rate limits appropriately. |


[default-events]: 10_overview.md#default-events

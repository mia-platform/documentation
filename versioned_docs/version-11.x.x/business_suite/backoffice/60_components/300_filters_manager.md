---
id: filters_manager
title: Filters Manager
sidebar_label: Filters Manager
---
<!--
WARNING:
This file is automatically generated. Please edit the 'README' file of the corresponding component and run `yarn copy:docs`
-->

[local-storage]: https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage

[data-schema]: ../30_page_layout.md#data-schema
[filters-options]: ../30_page_layout.md#filters-options
[filters]: ../40_core_concepts.md#filters

[change-query]: ../70_events.md#change-query
[change-filter]: ../70_events.md#change-filter
[add-filter]: ../70_events.md#add-filter

[bk-crud-client]: ./100_crud_client.md
[bk-filter-drawer]: ./290_filter_drawer.md



```html
<bk-filters-manager></bk-filters-manager>
```
<!-- TODO add image -->


The Filters Manager manages the display, application, and modification of filters.
If no filter has been applied, the Filters Manager does not render anything.
Otherwise, a counter of applied filters is displayed. Upon clicking on the filters counter, a pop-up that lists such filters is displayed.
Each of these can be toggled and un-toggled, removed, or it is possible to emit the request for editing it.

The Filters Manager listens to the request to add a new filter to existing ones, i.e. listens to [add-filter] events.
A component like the [Filter Drawer][bk-filter-drawer] could be the source of such request.
Applied filters are converted into a mongo-like query and propagated to other components, requesting to use such query when fetching data from the backend - that is, the query is injected into the payload of a [change-query] event. A component like the [CRUD client][bk-crud-client] listens to the `change-query` event and fetches data using its payload as query.

## How to configure

The Filters Manager does not require any particular configuration for its most basic usage:

```json
{
  "tag": "bk-filters-manager"
}
```

### Bootstrap - Apply filters from URL

Upon connecting to the page, the Filters Manager parses the page URL to retrieve the query parameter `filters`.
If found, its content is converted to [filters], and the request is issued to use such filters upon data retrieval.

### Hide Filters

A [data-schema] can be provided to the Filters Manager using property `dataSchema`, which might provide information for each field of the collection on how it should be used [with respect to filtering][filters-options].

In particular, filters on properties that include within their data-schema description the option to be hidden in filters:

```json
{
  "filtersOptions": {
    "hidden": true
  }
}
```

are not included in the list of filters that is displayed by the Filters Manger. Nonetheless, the Filters Manger still requests the filter to be applied.

### Persisten filters

Property `saveFilters` allows to save filters to [local-storage].
Filters are saved in local-storage through a key which can be customized with property `localStorageKey`, and defaults to `bk-filters-manager-store-` followed by the pathname of the current URL.
Upon connecting to the page, the Filters Manger fetches filters from local-storage and applies them.

:::caution
To avoid data clashing, `localStorageKey` should be unique per page.
:::


## Examples

A Filters Manager that does not hold in its state any filter yet, with no particular configuration:
```json
{
  "tag": "bk-filters-manager"
}
```

upon receiving an [add-filter] event with payload:
```json
{
  "property": "name",
  "operator": "equal",
  "value": "Bruce"
}
```

emits a [change-query] event with payload:
```json
{
  "filters": [
    {
      "property": "name",
      "operator": "equal",
      "value": "Bruce"
    }
  ]
}
```

And, upon receiving a second [add-filter] with payload:
```json
{
  "property": "price",
  "operator": "greater",
  "value": 15
}
```

emits a [change-query] event with payload:
```json
{
  "filters": [
    {
      "property": "name",
      "operator": "equal",
      "value": "Bruce"
    },
    {
      "property": "price",
      "operator": "greater",
      "value": 15
    }
  ]
}
```

<!-- TODO add examples for bootstrap and persistent filters -->


## API

### Properties & Attributes


| property          | attribute           | type                                         | default                                 | description                                                                                                                                              |
| ----------------- | ------------------- | -------------------------------------------- | --------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `dataSchema`      | -                   | [ExtendedJSONSchema7Definition][data-schema] | -                                       | data-schema describing the fields of the collection to query                                                                                             |
| `filters`         | -                   | [Filter][filters][]                          | []                                      | List of currently applied filters                                                                                                                        |
| `hide`            | `hide`              | boolean                                      | false                                   | Hides the rendered component                                                                                                                             |
| `saveFilters`     | `save-filters`      | boolean                                      | false                                   | if true, filters are automatically saved to local storage                                                                                                |
| `localStorageKey` | `local-storage-key` | strign                                       | bk-filters-manager-storage-`{pathname}` | key used to identify filters saved in local-storage. Defaults to a string composed of 'bk-filters-manager-storage-' and the pathname of the current URL. |

### Listens to


| event        | action               |
| ------------ | -------------------- |
| [add-filter] | applies a new filter |

### Emits


| event           | description                                     |
| --------------- | ----------------------------------------------- |
| [change-query]  | requires data filtering                         |
| [change-filter] | triggers the modification of an existing filter |
